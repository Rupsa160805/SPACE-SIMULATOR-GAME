<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Real Rocket Launch</title>
<style>
  body { margin:0; background:#000; color:white; font-family:Arial, sans-serif; }
  canvas { display:block; width:100%; height:100vh; background:linear-gradient(#87cefa, #001d3d); }
  #countdown {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 4rem;
    font-weight: bold;
    color: yellow;
    text-shadow: 0 0 15px red, 0 0 30px orange;
    display: none;
  }
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="countdown"></div>

<script>
(() => {
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d');
  const countdownEl = document.getElementById('countdown');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  // Rocket state
  let rocket = { x: canvas.width/2, y: canvas.height-100, vy: 0, thrust: false, fuel: 100 };
  let running = false;
  let lastTime = null;
  let particles = [];
  let stars = [];
  
  // Create stars
  for(let i=0;i<200;i++){
    stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,visible:false});
  }

  function drawBackground() {
    // Sky color changes with altitude
    let progress = Math.min(1, rocket.y / canvas.height);
    let g = ctx.createLinearGradient(0,0,0,canvas.height);
    g.addColorStop(0, progress > 0.5 ? "#000010" : "#87cefa");
    g.addColorStop(1, "#001d3d");
    ctx.fillStyle = g;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Show stars above certain altitude
    if(rocket.y < canvas.height/2){
      ctx.fillStyle="white";
      stars.forEach(s=>{
        ctx.fillRect(s.x,s.y,2,2);
      });
    }
  }

  function drawRocket() {
    ctx.save();
    ctx.translate(rocket.x, rocket.y);

    // Body
    ctx.fillStyle="silver";
    ctx.fillRect(-10,-40,20,40);

    // Nose cone
    ctx.beginPath();
    ctx.moveTo(-10,-40);
    ctx.lineTo(0,-60);
    ctx.lineTo(10,-40);
    ctx.closePath();
    ctx.fillStyle="red";
    ctx.fill();

    // Flames
    if(rocket.thrust && rocket.fuel>0){
      let flameLen = 20 + Math.random()*20;
      let grad = ctx.createLinearGradient(0,0,0,flameLen);
      grad.addColorStop(0,"white");
      grad.addColorStop(0.4,"orange");
      grad.addColorStop(1,"rgba(255,0,0,0)");
      ctx.fillStyle=grad;
      ctx.beginPath();
      ctx.moveTo(-8,0);
      ctx.lineTo(0,flameLen);
      ctx.lineTo(8,0);
      ctx.closePath();
      ctx.fill();

      // Smoke particles
      particles.push({x:rocket.x+(Math.random()*20-10),y:rocket.y+20,alpha:1});
    }

    ctx.restore();
  }

  function drawParticles() {
    particles.forEach((p,i)=>{
      ctx.fillStyle=`rgba(200,200,200,${p.alpha})`;
      ctx.beginPath();
      ctx.arc(p.x,p.y,8,0,Math.PI*2);
      ctx.fill();
      p.y+=1;
      p.alpha-=0.01;
      if(p.alpha<=0) particles.splice(i,1);
    });
  }

  function update(dt) {
    if(!running) return;
    if(rocket.fuel>0 && rocket.thrust){
      rocket.vy -= 0.02*dt;
      rocket.fuel-=0.02*dt;
    }
    rocket.vy+=0.01*dt; // gravity
    rocket.y+=rocket.vy;
    if(rocket.y>canvas.height-100) rocket.y=canvas.height-100;
  }

  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawBackground();
    drawParticles();
    drawRocket();
  }

  function loop(ts) {
    if(!lastTime) lastTime=ts;
    let dt = ts-lastTime; lastTime=ts;
    update(dt);
    draw();
    requestAnimationFrame(loop);
  }

  function startLaunch(){
    let count=3;
    countdownEl.style.display="block";
    countdownEl.textContent=count;
    let timer=setInterval(()=>{
      count--;
      if(count>0){
        countdownEl.textContent=count;
      } else {
        clearInterval(timer);
        countdownEl.textContent="LIFT OFF!";
        setTimeout(()=>countdownEl.style.display="none",1000);
        running=true;
        rocket.thrust=true;
      }
    },1000);
  }

  // Start automatically
  startLaunch();
  requestAnimationFrame(loop);
})();
</script>
</body>
</html>
