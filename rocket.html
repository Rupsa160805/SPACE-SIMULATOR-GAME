<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rocket Launch Simulator</title>
<style>
  body { margin:0; background:#000; color:white; font-family:Arial, sans-serif; overflow:hidden; }
  canvas { display:block; width:100vw; height:100vh; background:linear-gradient(#87cefa, #001d3d); }
  #info {
    position: absolute;
    top: 10px; left: 10px;
    background: rgba(0,0,0,0.6);
    padding: 10px;
    border-radius: 8px;
    font-size: 14px;
    color: #fff;
  }
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="info">
  <b>Controls:</b><br>
  ↑ / W = Thrust<br>
  ← / A = Left<br>
  → / D = Right<br>
</div>

<script>
(() => {
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  // Rocket state
  let rocket = { x: canvas.width/2, y: canvas.height-100, vy: 0, vx: 0, angle: 0, thrust: false, fuel: 100 };
  let keys = {};
  let particles = [];
  let stars = [];
  
  // Generate stars
  for(let i=0;i<200;i++){
    stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height});
  }

  // Background
  function drawBackground() {
    let progress = Math.max(0, 1 - rocket.y / canvas.height);
    let g = ctx.createLinearGradient(0,0,0,canvas.height);
    g.addColorStop(0, progress < 0.4 ? "#000010" : "#87cefa");
    g.addColorStop(1, "#001d3d");
    ctx.fillStyle = g;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Stars
    if(rocket.y < canvas.height/2){
      ctx.fillStyle="white";
      stars.forEach(s=>ctx.fillRect(s.x,s.y,2,2));
    }
  }

  // Rocket drawing (more realistic)
  function drawRocket() {
    ctx.save();
    ctx.translate(rocket.x, rocket.y);
    ctx.rotate(rocket.angle);

    // Body
    ctx.fillStyle="silver";
    ctx.fillRect(-10,-50,20,50);

    // Nose cone
    ctx.beginPath();
    ctx.moveTo(-10,-50);
    ctx.lineTo(0,-70);
    ctx.lineTo(10,-50);
    ctx.closePath();
    ctx.fillStyle="red";
    ctx.fill();

    // Fins
    ctx.fillStyle="blue";
    ctx.beginPath();
    ctx.moveTo(-10,0);
    ctx.lineTo(-25,15);
    ctx.lineTo(-10,15);
    ctx.closePath();
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(10,0);
    ctx.lineTo(25,15);
    ctx.lineTo(10,15);
    ctx.closePath();
    ctx.fill();

    // Flame
    if(rocket.thrust && rocket.fuel>0){
      let flameLen = 20 + Math.random()*20;
      let grad = ctx.createLinearGradient(0,0,0,flameLen);
      grad.addColorStop(0,"white");
      grad.addColorStop(0.4,"orange");
      grad.addColorStop(1,"rgba(255,0,0,0)");
      ctx.fillStyle=grad;
      ctx.beginPath();
      ctx.moveTo(-8,0);
      ctx.lineTo(0,flameLen);
      ctx.lineTo(8,0);
      ctx.closePath();
      ctx.fill();

      // Smoke particles
      particles.push({x:rocket.x+(Math.random()*20-10),y:rocket.y+20,alpha:1});
    }

    ctx.restore();
  }

  function drawParticles() {
    particles.forEach((p,i)=>{
      ctx.fillStyle=`rgba(200,200,200,${p.alpha})`;
      ctx.beginPath();
      ctx.arc(p.x,p.y,8,0,Math.PI*2);
      ctx.fill();
      p.y+=1;
      p.alpha-=0.01;
      if(p.alpha<=0) particles.splice(i,1);
    });
  }

  function update(dt) {
    // Controls
    if(keys["ArrowUp"] || keys["w"]){ rocket.thrust=true; }
    else { rocket.thrust=false; }
    if(keys["ArrowLeft"] || keys["a"]){ rocket.vx -= 0.01*dt; }
    if(keys["ArrowRight"] || keys["d"]){ rocket.vx += 0.01*dt; }

    // Thrust
    if(rocket.thrust && rocket.fuel>0){
      rocket.vy -= 0.02*dt;
      rocket.fuel-=0.01*dt;
    }

    // Physics
    rocket.vy += 0.01*dt; // gravity
    rocket.y += rocket.vy;
    rocket.x += rocket.vx;

    // Boundaries
    if(rocket.y>canvas.height-50){ rocket.y=canvas.height-50; rocket.vy=0; }
    if(rocket.x<20) rocket.x=20;
    if(rocket.x>canvas.width-20) rocket.x=canvas.width-20;
  }

  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawBackground();
    drawParticles();
    drawRocket();
  }

  function loop(ts) {
    if(!lastTime) lastTime=ts;
    let dt = ts-lastTime; lastTime=ts;
    update(dt);
    draw();
    requestAnimationFrame(loop);
  }

  let lastTime=null;
  requestAnimationFrame(loop);

  // Key events
  window.addEventListener("keydown",e=>keys[e.key]=true);
  window.addEventListener("keyup",e=>keys[e.key]=false);
})();
</script>
</body>
</html>
